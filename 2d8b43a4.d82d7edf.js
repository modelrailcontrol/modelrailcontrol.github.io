(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{113:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return p}));var a=n(2),r=n(6),i=(n(0),n(157)),o={title:"Restrictions"},l={id:"conv-restriction",isDocsHomePage:!1,title:"Restrictions",description:"MMRC communicates through MQTT and is hence based on the basic principles of MQTT topic publication and subscription.",source:"@site/docs/conv-restriction.md",permalink:"/docs/conv-restriction",editUrl:"https://github.com/modelrailcontrol/MRC-documentation/docs/conv-restriction.md",sidebar:"someSidebar",previous:{title:"\xd6vrigt",permalink:"/docs/function-misc"},next:{title:"Topology",permalink:"/docs/conv-topology"}},c=[{value:"Topic IDs",id:"topic-ids",children:[]},{value:"Payload",id:"payload",children:[]},{value:"QoS and retained messages",id:"qos-and-retained-messages",children:[]},{value:"Last will",id:"last-will",children:[]}],s={rightToc:c};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"MMRC communicates through ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://mqtt.org"}),"MQTT")," and is hence based on the basic principles of MQTT topic publication and subscription."),Object(i.b)("h3",{id:"topic-ids"},"Topic IDs"),Object(i.b)("p",null,"An MQTT topic consists of one or more topic levels, separated by the slash character (",Object(i.b)("inlineCode",{parentName:"p"},"/"),").\nA topic level ID MAY contain lowercase letters from ",Object(i.b)("inlineCode",{parentName:"p"},"a")," to ",Object(i.b)("inlineCode",{parentName:"p"},"z"),", numbers from ",Object(i.b)("inlineCode",{parentName:"p"},"0")," to ",Object(i.b)("inlineCode",{parentName:"p"},"9")," as well as the hyphen character (",Object(i.b)("inlineCode",{parentName:"p"},"-"),")."),Object(i.b)("p",null,"A topic level ID MUST NOT start or end with a hyphen (",Object(i.b)("inlineCode",{parentName:"p"},"-"),").\nThe special character ",Object(i.b)("inlineCode",{parentName:"p"},"$")," is used and reserved for MMRC ",Object(i.b)("em",{parentName:"p"},"attributes"),"."),Object(i.b)("h3",{id:"payload"},"Payload"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Every MQTT message payload MUST be sent as a UTF-8 encoded string"),Object(i.b)("li",{parentName:"ul"},"The value published as payload MUST be valid for the respective property/attribute type as per the list below")),Object(i.b)("h4",{id:"string"},"String"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"String types are limited to 268,435,456 characters"),Object(i.b)("li",{parentName:"ul"},'An empty string ("") is a valid payload')),Object(i.b)("h4",{id:"integer"},"Integer"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Integer types are UTF-8 encoded string literal representations of 64-bit signed whole numbers"),Object(i.b)("li",{parentName:"ul"},"Integers range from -9,223,372,036,854,775,808 (-2",Object(i.b)("sup",null,"63"),") to 9,223,372,036,854,775,807 (2",Object(i.b)("sup",null,"63"),"-1)"),Object(i.b)("li",{parentName:"ul"},'The payload may only contain whole numbers and the negation character "-". No other characters including spaces (" ") are permitted'),Object(i.b)("li",{parentName:"ul"},'A string with just a negation sign ("-") is not a valid payload'),Object(i.b)("li",{parentName:"ul"},'An empty string ("") is not a valid payload')),Object(i.b)("h4",{id:"float"},"Float"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Float types are UTF-8 encoded string literal representations of 64-bit signed floating point numbers"),Object(i.b)("li",{parentName:"ul"},"Floats range from 2",Object(i.b)("sup",null,"-1074")," to (2-2",Object(i.b)("sup",null,"-52"),")","*","2",Object(i.b)("sup",null,"1023")),Object(i.b)("li",{parentName:"ul"},'The payload may only contain whole numbers, the negation character "-", the exponent character "e" or "E" and the decimal separator ".", no other characters, including spaces (" ") are permitted'),Object(i.b)("li",{parentName:"ul"},'The dot character (".") is the decimal separator (used if necessary) and may only have a single instance present in the payload'),Object(i.b)("li",{parentName:"ul"},'Representations of numeric concepts such as "NaN" (Not a Number) and "Infinity" are not a valid payload'),Object(i.b)("li",{parentName:"ul"},'A string with just a negation sign ("-") is not a valid payload'),Object(i.b)("li",{parentName:"ul"},'An empty string ("") is not a valid payload')),Object(i.b)("h4",{id:"boolean"},"Boolean"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},'Booleans must be converted to the string literals "true" or "false"'),Object(i.b)("li",{parentName:"ul"},'Representation is case sensitive, e.g. "TRUE" or "FALSE" are not valid payloads.'),Object(i.b)("li",{parentName:"ul"},'An empty string ("") is not a valid payload')),Object(i.b)("h4",{id:"enum"},"Enum"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Enum payloads must be one of the values specified in the format definition of the property"),Object(i.b)("li",{parentName:"ul"},'Enum payloads are case sensitive, e.g. "Car" will not match a format definition of "car"'),Object(i.b)("li",{parentName:"ul"},"Payloads should have leading and trailing whitespace removed"),Object(i.b)("li",{parentName:"ul"},'An empty string ("") is not a valid payload')),Object(i.b)("h4",{id:"color"},"Color"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},'Color payload validity varies depending on the property format definition of either "rgb" or "hsv"'),Object(i.b)("li",{parentName:"ul"},"Both payload types contain comma separated whole numbers of differing restricted ranges"),Object(i.b)("li",{parentName:"ul"},'The encoded string may only contain whole numbers and the comma character ",", no other characters are permitted, including spaces (" ")'),Object(i.b)("li",{parentName:"ul"},'Payloads for type "rgb" contains 3 comma separated values of numbers with a valid range between 0 and 255. e.g. 100,100,100'),Object(i.b)("li",{parentName:"ul"},'Payloads for type "hsv" contains 3 comma separated values of numbers. The first number has a range of 0 to 360, the second and third numbers have a range of 0 to 100.  e.g. 300,50,75'),Object(i.b)("li",{parentName:"ul"},'An empty string ("") is not a valid payload')),Object(i.b)("h3",{id:"qos-and-retained-messages"},"QoS and retained messages"),Object(i.b)("p",null,"The nature of the MMRC convention makes it safe about duplicate messages, so the recommended QoS for reliability is ",Object(i.b)("strong",{parentName:"p"},"QoS 1"),".\nAll messages defined in this convention MUST be sent as ",Object(i.b)("strong",{parentName:"p"},"retained"),", UNLESS stated otherwise."),Object(i.b)("h3",{id:"last-will"},"Last will"),Object(i.b)("p",null,"MQTT only allows one last will message per connection.\nMMRC requires a last will for the ",Object(i.b)("inlineCode",{parentName:"p"},"mmrc")," / ",Object(i.b)("inlineCode",{parentName:"p"},"device ID")," / ",Object(i.b)("inlineCode",{parentName:"p"},"$state")," attribute, see ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"#device-behavior"}),"Device Lifecycle"),".\nAs a consequence a new MQTT connection to the broker is required per published device."))}p.isMDXComponent=!0},157:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=r.a.createContext({}),p=function(e){var t=r.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},b=function(e){var t=p(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),b=p(n),u=a,m=b["".concat(o,".").concat(u)]||b[u]||d[u]||i;return n?r.a.createElement(m,l(l({ref:t},s),{},{components:n})):r.a.createElement(m,l({ref:t},s))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=u;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);