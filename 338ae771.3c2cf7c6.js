(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{115:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return b})),r.d(t,"metadata",(function(){return i})),r.d(t,"rightToc",(function(){return l})),r.d(t,"default",(function(){return c}));var a=r(2),n=r(6),o=(r(0),r(157)),b={title:"Properties"},i={id:"conv-properties",isDocsHomePage:!1,title:"Properties",description:"* mmrc / device ID / node ID / property ID: this is the base topic of a property.",source:"@site/docs/conv-properties.md",permalink:"/docs/conv-properties",editUrl:"https://github.com/modelrailcontrol/MRC-documentation/tree/master/docs/conv-properties.md",sidebar:"someSidebar",previous:{title:"Nodes",permalink:"/docs/conv-nodes"},next:{title:"Markdown Style Guide",permalink:"/docs/misc-markdown"}},l=[{value:"Property Attributes",id:"property-attributes",children:[]},{value:"Property command topic",id:"property-command-topic",children:[]}],p={rightToc:l};function c(e){var t=e.components,r=Object(n.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},p,r,{components:t,mdxType:"MDXLayout"}),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("inlineCode",{parentName:"p"},"mmrc")," / ",Object(o.b)("inlineCode",{parentName:"p"},"device ID")," / ",Object(o.b)("inlineCode",{parentName:"p"},"node ID")," / ",Object(o.b)("strong",{parentName:"p"},Object(o.b)("inlineCode",{parentName:"strong"},"property ID")),": this is the base topic of a property.\nEach property must have a unique property ID on a per-node basis which adhere to the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"#topic-ids"}),"ID format"),".")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"A property payload (e.g. a sensor reading) is directly published to the property topic, e.g.:"),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'mmrc/super-car/engine/temperature \u2192 "21.5"\n')))),Object(o.b)("h3",{id:"property-attributes"},"Property Attributes"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"mmrc")," / ",Object(o.b)("inlineCode",{parentName:"li"},"device ID")," / ",Object(o.b)("inlineCode",{parentName:"li"},"node ID")," / ",Object(o.b)("inlineCode",{parentName:"li"},"property ID")," / ",Object(o.b)("strong",{parentName:"li"},Object(o.b)("inlineCode",{parentName:"strong"},"$property-attribute")),":")),Object(o.b)("p",null,"The following attributes are required:"),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:"left"}),"Topic"),Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:"left"}),"Description"),Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:"left"}),"Payload type"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"$name"),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"Friendly name of the property."),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"String")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"$datatype"),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"The data type. See ",Object(o.b)("a",Object(a.a)({parentName:"td"},{href:"#payloads"}),"Payloads"),"."),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"Enum: ","[","integer, float, boolean,string, enum, color","]")))),Object(o.b)("p",null,"The following attributes are optional:"),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:"left"}),"Topic"),Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:"left"}),"Description"),Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:"left"}),"Payload type"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"$format"),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"Specifies restrictions or options for the given data type"),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"See below")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"$settable"),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"Settable (",Object(o.b)("code",null,"true"),"). Default is read-only (",Object(o.b)("code",null,"false"),")"),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"Boolean")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"$retained"),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"Non-retained (",Object(o.b)("code",null,"false"),"). Default is Retained (",Object(o.b)("code",null,"true"),")."),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:"left"}),"Boolean")))),Object(o.b)("p",null,"For example, our ",Object(o.b)("inlineCode",{parentName:"p"},"temperature")," property would send:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'mmrc/super-car/engine/temperature/$name \u2192 "Engine temperature"\nmmrc/super-car/engine/temperature/$settable \u2192 "false"\nmmrc/super-car/engine/temperature/$unit \u2192 "\xb0C"\nmmrc/super-car/engine/temperature/$datatype \u2192 "float"\nmmrc/super-car/engine/temperature/$format \u2192 "-20:120"\nmmrc/super-car/engine/temperature \u2192 "21.5"\n')),Object(o.b)("p",null,"Settable and retained:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Properties can be ",Object(o.b)("strong",{parentName:"p"},"settable"),".\nFor example, you don't want your ",Object(o.b)("inlineCode",{parentName:"p"},"temperature")," property to be settable in case of a temperature sensor\n(like the car example), but to be settable in case of a thermostat.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Properties can be ",Object(o.b)("strong",{parentName:"p"},"retained"),".\nA property is retained by default. A non-retained property would be useful for momentary events (door bell pressed)."))),Object(o.b)("p",null,"A combination of those flags compiles into this list:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"retained + non-settable"),": The node publishes a property state (temperature sensor)"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"retained + settable"),": The node publishes a property state, and can receive commands for the property (by controller or other party) (lamp power)"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"non-retained + non-settable"),": The node publishes momentary events (door bell pressed)"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"non-retained + settable"),": The node publishes momentary events, and can receive commands for the property (by controller or other party) (brew coffee)")),Object(o.b)("p",null,"Format:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"For ",Object(o.b)("inlineCode",{parentName:"li"},"integer")," and ",Object(o.b)("inlineCode",{parentName:"li"},"float"),": Describes a range of payloads e.g. ",Object(o.b)("inlineCode",{parentName:"li"},"10:15")),Object(o.b)("li",{parentName:"ul"},"For ",Object(o.b)("inlineCode",{parentName:"li"},"enum"),": ",Object(o.b)("inlineCode",{parentName:"li"},"payload,payload,payload")," for enumerating all valid payloads."),Object(o.b)("li",{parentName:"ul"},"For ",Object(o.b)("inlineCode",{parentName:"li"},"color"),":",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"rgb")," to provide colors in RGB format e.g. ",Object(o.b)("inlineCode",{parentName:"li"},"255,255,0")," for yellow."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"hsv")," to provide colors in HSV format e.g. ",Object(o.b)("inlineCode",{parentName:"li"},"60,100,100")," for yellow.")))),Object(o.b)("h3",{id:"property-command-topic"},"Property command topic"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"mmrc")," / ",Object(o.b)("inlineCode",{parentName:"li"},"device ID")," / ",Object(o.b)("inlineCode",{parentName:"li"},"node ID")," / ",Object(o.b)("inlineCode",{parentName:"li"},"property ID")," / ",Object(o.b)("strong",{parentName:"li"},Object(o.b)("inlineCode",{parentName:"strong"},"set")),": The device must subscribe to this topic if the property is ",Object(o.b)("strong",{parentName:"li"},"settable")," (in case of actuators for example).")),Object(o.b)("p",null,"A MMRC controller publishes to the ",Object(o.b)("inlineCode",{parentName:"p"},"set")," command topic with non-retained messages only."),Object(o.b)("p",null,"The assigned and processed payload must be reflected by the MMRC device in the property topic ",Object(o.b)("inlineCode",{parentName:"p"},"mmrc")," / ",Object(o.b)("inlineCode",{parentName:"p"},"device ID")," / ",Object(o.b)("inlineCode",{parentName:"p"},"node ID")," / ",Object(o.b)("inlineCode",{parentName:"p"},"property ID")," as soon as possible.\nThis property state update not only informs other devices about the change but closes the control loop for the commanding controller, important for deterministic interaction with the client device."),Object(o.b)("p",null,"To give an example: A ",Object(o.b)("inlineCode",{parentName:"p"},"kitchen-light")," device exposing the ",Object(o.b)("inlineCode",{parentName:"p"},"light")," node with a settable ",Object(o.b)("inlineCode",{parentName:"p"},"power")," property subscribes to the topic ",Object(o.b)("inlineCode",{parentName:"p"},"mmrc/kitchen-light/light/power/set")," for commands:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'mmrc/kitchen-light/light/power/set \u2190 "true"\n')),Object(o.b)("p",null,"In response the device will turn on the light and upon success update its ",Object(o.b)("inlineCode",{parentName:"p"},"power")," property state accordingly:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'mmrc/kitchen-light/light/power \u2192 "true"\n')))}c.isMDXComponent=!0},157:function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return O}));var a=r(0),n=r.n(a);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var p=n.a.createContext({}),c=function(e){var t=n.a.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},m=function(e){var t=c(e.components);return n.a.createElement(p.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},d=n.a.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,b=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=c(r),d=a,O=m["".concat(b,".").concat(d)]||m[d]||s[d]||o;return r?n.a.createElement(O,i(i({ref:t},p),{},{components:r})):n.a.createElement(O,i({ref:t},p))}));function O(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,b=new Array(o);b[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:a,b[1]=i;for(var p=2;p<o;p++)b[p]=r[p];return n.a.createElement.apply(null,b)}return n.a.createElement.apply(null,r)}d.displayName="MDXCreateElement"}}]);