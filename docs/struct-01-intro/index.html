<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.68">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="MRC Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="MRC Blog Atom Feed"><title data-react-helmet="true">Introduktion | MRC</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Introduktion | MRC"><meta data-react-helmet="true" name="description" content="Principen för MQTT är att man skickar (publish) ett meddelande (payload) till ett specifikt ämne (topic). Andra kan sedan välja att lyssa på eller prenumerera (subscribe) på ett ämne. Så varje gång någon skickar (publish) ett meddelande (payload) till ett ämne (topic), kommer detta meddelande att vidarebefordras till alla som valt att prenumerera/lyssna (subscribe) på detta ämne."><meta data-react-helmet="true" property="og:description" content="Principen för MQTT är att man skickar (publish) ett meddelande (payload) till ett specifikt ämne (topic). Andra kan sedan välja att lyssa på eller prenumerera (subscribe) på ett ämne. Så varje gång någon skickar (publish) ett meddelande (payload) till ett ämne (topic), kommer detta meddelande att vidarebefordras till alla som valt att prenumerera/lyssna (subscribe) på detta ämne."><meta data-react-helmet="true" property="og:url" content="https://modelrailcontrol.org/docs/struct-01-intro"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://modelrailcontrol.org/docs/struct-01-intro"><link rel="stylesheet" href="/styles.75f223d2.css">
<link rel="preload" href="/styles.b694f8ce.js" as="script">
<link rel="preload" href="/runtime~main.a23074d7.js" as="script">
<link rel="preload" href="/main.10b3639f.js" as="script">
<link rel="preload" href="/1.799276e2.js" as="script">
<link rel="preload" href="/65.140df189.js" as="script">
<link rel="preload" href="/66.b1df8166.js" as="script">
<link rel="preload" href="/935f2afb.52c21283.js" as="script">
<link rel="preload" href="/64.5b764e11.js" as="script">
<link rel="preload" href="/7c7f41eb.960b67a0.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2AhQ">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/mrc-logo.svg" alt="MRC-logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img alt="MRC-logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Dokumentation</a><a class="navbar__item navbar__link" href="/docs/clients/intro-overview">Enheter</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/modelrailcontrol" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/mrc-logo.svg" alt="MRC-logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img alt="MRC-logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Dokumentation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/clients/intro-overview">Enheter</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/modelrailcontrol" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive thin-scrollbar menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Översikt</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Introduktion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro-contribute">Contribute to MRC</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">MRC ämnesstruktur</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/struct-01-intro">Introduktion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/struct-02-device">Device / enhet</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/struct-03-node">Node / funktioner</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/struct-04-property">Property / egenskaper</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">MRC funktioner</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/function-01-intro">Introduktion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/function-02-turnout">Växlar</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/function-03-signal">Signaler</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/function-04-button">Knappar/omkopplare</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/function-05-block">Block</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">MRC konvention</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/conv-restriction">Restrictions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/conv-topology">Topology</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/conv-devices">Devices</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/conv-nodes">Nodes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/conv-properties">Properties</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_39qw"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Introduktion</h1></header><div class="markdown"><p>Principen för MQTT är att man skickar (publish) ett meddelande (payload) till ett specifikt ämne (topic). Andra kan sedan välja att lyssa på eller prenumerera (subscribe) på ett ämne. Så varje gång någon skickar (publish) ett meddelande (payload) till ett ämne (topic), kommer detta meddelande att vidarebefordras till alla som valt att prenumerera/lyssna (subscribe) på detta ämne.</p><p><img alt="Principen för MQTT" src="/assets/images/struct-overview-c48cdcde2b21dcb4f66ee53d27c670bd.svg"></p><p>I centrum för detta förfarande finns en meddelandeserver (broker). Det är en central programvara vars enda uppgift lite förenklat är att hantera ämnen, meddelanden och prenumerationer.
Man kan även göra liknelsen att brokerns uppgift är att hantera en massa fack (subject) med meddelanden (payload) som enheter kan skriva dit (publish) eller hämta (subsrcibe).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ordlista"></a>Ordlista<a aria-hidden="true" class="hash-link" href="#ordlista" title="Direct link to heading">#</a></h2><table><thead><tr><th>Svenska</th><th>Engelska</th><th>Förklaring</th></tr></thead><tbody><tr><td>ämne</td><td>topic</td><td></td></tr><tr><td>meddelande</td><td>payload</td><td></td></tr><tr><td>enhet</td><td>device</td><td></td></tr><tr><td>funktion</td><td>node</td><td></td></tr><tr><td>egenskap</td><td>property</td><td></td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="uppbyggnad"></a>Uppbyggnad<a aria-hidden="true" class="hash-link" href="#uppbyggnad" title="Direct link to heading">#</a></h2><p>Ett ämne i MRC är alltid uppbyggt på följande sätt:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mrc/device/node/property</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">mrc/enhet/funktion/egenskap</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="attribut"></a>Attribut<a aria-hidden="true" class="hash-link" href="#attribut" title="Direct link to heading">#</a></h2><p>På varje nivå i strukturen kan man sedan sätta attribut, vilka kan varierar beroende på nivån. Dessa attribut används till att ge information om just den nivå där attributet finns, exempelvis:</p><p><code>mrc/device/$name</code>
där man då har möjlighet att ge enheten ett läsbart namn, kanske &quot;Växel 22&quot;.</p><p><code>mrc/device/node/$name</code>
där man ger en av enhetens funktioner ett läsbart namn, kanske &quot;Växelstyrning&quot;.</p><p><code>mrc/device/node/property/$name</code>
där man ger funktionens egenskap ett namn, kanske &quot;Riktning&quot;.</p><p>Vilka attribut som finns och måste användas, finns beskrivet i <a href="/docs/conv-restriction">Konventionen</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="base-topic"></a>Base topic<a aria-hidden="true" class="hash-link" href="#base-topic" title="Direct link to heading">#</a></h2><p>Den första nivån i MRC-strukturen och som grund för alla ämnen i MRC används följande:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mrc/</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Denna start på ämnet visar att du följer MRC-konventionen och då ska alltså alla ämnen börja med denna text, exempelvis</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mrc/pkin-to001/turnout/2turnout</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">mrc/1270262539-af/button/push</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">mrc/bwah-0012/signal/approach</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Observera</h5></div><div class="admonition-content"><p>Om du gör du din egen variant av MRC eller MQTT ämnesstruktur, så <em>måste</em> du hitta på ett eget Base topic. Ämnet <code>mrc/</code> är reserverat för enheter som följer MRC Konventionen fullt ut.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ge-kommando"></a>Ge kommando<a aria-hidden="true" class="hash-link" href="#ge-kommando" title="Direct link to heading">#</a></h2><p>De ämnen vi skapar, kan användas på två olika sätt: Både för att skicka kommandon till (publish) och för att hämta meddelanden (subscribe). Men i MRC gör man detta på ett lite speciellt sätt, med ett kommandoämne:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mrc/pkin-sj06/turnout/direction/set</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>När någon annan enhet eller funktion vill lägga om den här växeln, skickar dem ett lämpligt meddelande (publish) till detta ämne. En enhet måste alltid lyssna (subscribe) till sina egna <code>set</code>-ämnen för att kunna veta när den ska agera.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="sätta-status"></a>Sätta status<a aria-hidden="true" class="hash-link" href="#sätta-status" title="Direct link to heading">#</a></h2><p>När enheten väl utfört kommandot, bör den verifiera detta genom att skicka ett lämpligt meddelande (publish) till samma ämne (fast utan <code>set</code>). Så i exempelt ovan skickas ett meddelande till</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mrc/pkin-sj06/turnout/direction/</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Vad man skickar i de båda fallen, är inte bestämt i konventionen. Men en bra regel är att skicka samma meddelande till status, som man fick i kommandot.</p><p>Så om kommandot i ämnet <code>mrc/pkin-sj06/turnout/direction/set</code> var &quot;turn&quot;, bör man sätta statusen i ämnet <code>mrc/pkin-sj06/turnout/direction/</code>till &quot;turn&quot;.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/modelrailcontrol/MRC-documentation/blob/master/docs/struct-01-intro.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/intro-contribute"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Contribute to MRC</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/struct-02-device"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Device / enhet »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_ thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ordlista" class="table-of-contents__link">Ordlista</a></li><li><a href="#uppbyggnad" class="table-of-contents__link">Uppbyggnad</a></li><li><a href="#attribut" class="table-of-contents__link">Attribut</a></li><li><a href="#base-topic" class="table-of-contents__link">Base topic</a></li><li><a href="#ge-kommando" class="table-of-contents__link">Ge kommando</a></li><li><a href="#sätta-status" class="table-of-contents__link">Sätta status</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Information</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Dokumentation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/clients/intro-overview/">Enheter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Gemenskap</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.svensktmjforum.se/forum/index.php?topic=21831.0" target="_blank" rel="noopener noreferrer" class="footer__link-item">Svenskt MJ-forum</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Övrigt</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/modelrailcontrol" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://v2.docusaurus.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus</a></li></ul></div></div><div class="text--center"><div>CC-BY-SA © 2020 Model Rail Control</div></div></div></footer></div>
<script src="/styles.b694f8ce.js"></script>
<script src="/runtime~main.a23074d7.js"></script>
<script src="/main.10b3639f.js"></script>
<script src="/1.799276e2.js"></script>
<script src="/65.140df189.js"></script>
<script src="/66.b1df8166.js"></script>
<script src="/935f2afb.52c21283.js"></script>
<script src="/64.5b764e11.js"></script>
<script src="/7c7f41eb.960b67a0.js"></script>
</body>
</html>