<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="MRC Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="MRC Blog Atom Feed"><title data-react-helmet="true">Börja programmera | MRC</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Börja programmera | MRC"><meta data-react-helmet="true" name="description" content="Det krävs en del förberedelser för att kunna programmera en Arduino kretskortsdator. Det mesta gör man bara en gång och nedan följer en beskrivning av de olika stegen."><meta data-react-helmet="true" property="og:description" content="Det krävs en del förberedelser för att kunna programmera en Arduino kretskortsdator. Det mesta gör man bara en gång och nedan följer en beskrivning av de olika stegen."><meta data-react-helmet="true" property="og:url" content="https://modelrailcontrol.org/docs/clients/intro-02-arduino"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://modelrailcontrol.org/docs/clients/intro-02-arduino"><link rel="stylesheet" href="/styles.8f97edd3.css">
<link rel="preload" href="/styles.e026daba.js" as="script">
<link rel="preload" href="/runtime~main.af84c8f0.js" as="script">
<link rel="preload" href="/main.7ed5da19.js" as="script">
<link rel="preload" href="/1.961b250e.js" as="script">
<link rel="preload" href="/2.6a4be48e.js" as="script">
<link rel="preload" href="/57.b0a0774d.js" as="script">
<link rel="preload" href="/58.2bbf2acb.js" as="script">
<link rel="preload" href="/20ac7829.7a8a2a07.js" as="script">
<link rel="preload" href="/17896441.3187e0e5.js" as="script">
<link rel="preload" href="/41aecccd.871f343b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/mrc-logo.svg" alt="MRC-logo"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Dokumentation</a><a class="navbar__item navbar__link" href="/docs/clients/intro-01-overview">Enheter</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/modelrailcontrol" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/mrc-logo.svg" alt="MRC-logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Dokumentation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/clients/intro-01-overview">Enheter</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/modelrailcontrol" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp" role="complementary"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Allmänt</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/clients/intro-01-overview">Översikt</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/clients/intro-02-arduino">Börja programmera</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/clients/intro-03-wifi">Enheters grundinställning</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Meddelandeserver</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/clients/cmc-01-install">Installera</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/clients/cmc-02-config">Konfigurera</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/clients/cmc-03-start">Starta &amp; felsök</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/clients/cmc-04-mqtt">MQTT</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Börja programmera</h1></header><div class="markdown"><p>Det krävs en del förberedelser för att kunna programmera en Arduino kretskortsdator. Det mesta gör man bara en gång och nedan följer en beskrivning av de olika stegen.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="arduino-ide"></a>Arduino IDE<a aria-hidden="true" tabindex="-1" class="hash-link" href="#arduino-ide" title="Direct link to heading">#</a></h2><p>Börja med att ladda hem Arduinos IDE/utvecklingsmiljö från sidan <a href="https://www.arduino.cc/en/Main/Software" target="_blank" rel="noopener noreferrer">https://www.arduino.cc/en/Main/Software</a>. Det finns versioner för både Windows, Mac och Linux. Installera utvecklingsmiljön på din dator, instruktioner finns på sidan <a href="https://www.arduino.cc/en/Guide/HomePage" target="_blank" rel="noopener noreferrer">https://www.arduino.cc/en/Guide/HomePage</a>.</p><p><img src="../../img/mmrc-sw01.png"></p><p>Observera att man i Linux kan få ett felmeddelande om åtkomst till serieporten (Error opening serial port…) första gången man startar utvecklingsmiljön. Detta har att göra med en begränsad behörighet och det finns instruktioner för hur det åtgärdas längst ner på installationssidan för Linux.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="drivrutin-för-usb-krets-ch340"></a>Drivrutin för USB-krets CH340<a aria-hidden="true" tabindex="-1" class="hash-link" href="#drivrutin-för-usb-krets-ch340" title="Direct link to heading">#</a></h2><p>För vissa (billigare?) kretskortsdatorer måste man på Windows installera drivrutiner för en USB-krets som heter CH340. Det finns en beskrivning av hur man gör detta hos exempelvis Lawicel: <a href="http://www.lawicel.se/blog/esp8266-d1-mini-med-ch340/" target="_blank" rel="noopener noreferrer">http://www.lawicel.se/blog/esp8266-d1-mini-med-ch340/</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="kretskortsdatorn"></a>Kretskortsdatorn<a aria-hidden="true" tabindex="-1" class="hash-link" href="#kretskortsdatorn" title="Direct link to heading">#</a></h2><p>För att kunna programmera Arduinos med ESP8266-kretsar behöver den typen av kort läggas till i Arduinos utvecklingsmiljö. Det sker på följande sätt.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="steg-1---lägg-till-kort"></a>Steg 1 - Lägg till kort<a aria-hidden="true" tabindex="-1" class="hash-link" href="#steg-1---lägg-till-kort" title="Direct link to heading">#</a></h3><p>Gå till utvecklingsmiljöns inställningar via Fil -&gt; Inställningar. Lägg sen till webbadressen ”<a href="http://arduino.esp8266.com/stable/package_esp8266com_index.json%E2%80%9D">http://arduino.esp8266.com/stable/package_esp8266com_index.json”</a> i fältet “Additional Board Manager URLs” och klicka på Ok-knappen.</p><p><img src="../../img/mmrc-sw02.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="steg-2---installera-kort"></a>Steg 2 - Installera kort<a aria-hidden="true" tabindex="-1" class="hash-link" href="#steg-2---installera-kort" title="Direct link to heading">#</a></h3><p>Öppna sedan Korthanteraren via menyn Verktyg -&gt; Kort: ”xxxx” -&gt; Korthanterare… Scrolla ner till eller sök efter “esp8266” och klicka sedan på Install-knappen (saknas på denna bild) för att installera kortet. Stäng sedan Korthanteraren.</p><p><img src="../../img/mmrc-sw03.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="steg-3---välj-kretskortsdator"></a>Steg 3 - Välj kretskortsdator<a aria-hidden="true" tabindex="-1" class="hash-link" href="#steg-3---välj-kretskortsdator" title="Direct link to heading">#</a></h3><p>Välj nu den kretskortsdator du vill arbeta med via menyn Verktyg -&gt; Kort: ”xxxx”. I fallet med en Wemos eller klon, kan man välja “LOLIN(WEMOS) D1 R2 &amp; Mini”. Du måste även välja vilken port kretskortsdatorn är ansluten via menyn Verktyg -&gt; Port.</p><p><img src="../../img/mmrc-sw04.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="steg-4---starta-om"></a>Steg 4 - Starta om<a aria-hidden="true" tabindex="-1" class="hash-link" href="#steg-4---starta-om" title="Direct link to heading">#</a></h3><p>Avsluta nu Arduinos utvecklingsmiljö och starta den igen.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="bibliotek"></a>Bibliotek<a aria-hidden="true" tabindex="-1" class="hash-link" href="#bibliotek" title="Direct link to heading">#</a></h2><p>Programvaran för MMRC använder en del färdiga funktioner från olika bibliotek eller ”libraries”. Dessa bibliotek måste också läggas till i utvecklingsmiljön.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="steg-1---hantera-bibliotek"></a>Steg 1 - Hantera bibliotek<a aria-hidden="true" tabindex="-1" class="hash-link" href="#steg-1---hantera-bibliotek" title="Direct link to heading">#</a></h3><p>I Arduino utvecklingsmiljön väljer du menyn Verktyg -&gt; Hantera bibliotek… Sök sedan efter biblioteket i filtreringsrutan.</p><p><img src="../../img/mmrc-sw05.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="steg-2---installera-bibliotek"></a>Steg 2 - Installera bibliotek<a aria-hidden="true" tabindex="-1" class="hash-link" href="#steg-2---installera-bibliotek" title="Direct link to heading">#</a></h3><p>När du hittat rätt bibliotek, klickar då på Installera-knappen (saknas i bilden ovan) för att installera den senaste versionen av biblioteket. Upprepa nu detta för samtliga bibliotek som behövs.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">EasyButton by Evert Arias</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">IotWebConf by Balazs Kelemen</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PubSubClient by Nick O’Leary</span></div></div></div></div></div><p>När du nu installerat alla nödvändiga kort och bibliotek, är utvecklingsmiljön klar för programmering.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="mmrc-programvara"></a>MMRC programvara<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mmrc-programvara" title="Direct link to heading">#</a></h2><p>Nu är det dags att ladda hem och installera själva MMRC-programvaran. Först ska programvaran laddas hem och från Github, normalt via en ZIP-fil.</p><p><img src="../../img/mmrc-sw06.png"></p><p>Packa sedan upp ZIP-filen i mappen för Arduino utvecklingsmiljöns skissbok (var den mappen finns, kan man se via menyn Fil -&gt; Inställningar). Starta sedan Arduino utvecklingsmiljön och välj Fil -&gt; Skissbok och sen den programvara du nyss laddade hem.</p><p><img src="../../img/mmrc-sw08.png"></p><p>Första gången du installerar och kör MMRC-programvaran kan det vara lämplig att se vad som händer i programmet. Starta därför Seriell monitor via menyn Verktyg -&gt; Seriell monitor och se till att hastigheten är satt till 9600 baud.</p><p><img src="../../img/mmrc-sw09.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="anslut-kretskortsdatorn"></a>Anslut kretskortsdatorn<a aria-hidden="true" tabindex="-1" class="hash-link" href="#anslut-kretskortsdatorn" title="Direct link to heading">#</a></h2><p>Anslut nu kretskortsdatorn via vald USB-port (Verktyg -&gt; Port). Det kan vara lämpligt att inte ha servon anslutna till kretskortsdatorn första gången man startar den, eftersom deras läge är okänt och de kan ställas i fel/konstiga lägen.</p><p><img src="../../img/mmrc-sw11.png"></p><p>Som nästa steg är det nu dags att installera programvaran på kretskortsdatorn. Det gör man via menyn Skiss –&gt; Ladda upp, Ctrl+U eller med pilhöger-symbolen i verktygsraden. Uppladdningen kan ta några sekunder och sen är MMRC förhoppningsvis igång.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="testa"></a>Testa!<a aria-hidden="true" tabindex="-1" class="hash-link" href="#testa" title="Direct link to heading">#</a></h2><p>Har allt gått bra så ska du nu i Seriell Monitor kunna se att kretskortsdator gör en massa olika saker. Du ska exempelvis kunna se att MMRC försöker skapa ett eget nätverk (AP) och att den publicerar och prenumererar på en del MQTT-meddelanden. Beroende på vad du nu har kopplat till kretskortsdatorn ska du nu kunna testa dess olika funktioner och se vad som händer i Seriell monitor.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="stänga-av-meddelanden"></a>Stänga av meddelanden<a aria-hidden="true" tabindex="-1" class="hash-link" href="#stänga-av-meddelanden" title="Direct link to heading">#</a></h2><p>En nackdel med Seriell monitor är att den ibland kanske ”krockar” med en utgång på kretskortsdatorn som även MMRC använder. Så när du är klar med testandet och ser att MMRC fungerar som det ska, kan du lämpligen stänga av utskrifterna till Seriell monitor.</p><p><img src="../../img/mmrc-sw10.png"></p><p>Du stänger av utskrifterna genom att leta reda på raden ”byte debug = 1;” i programkoden. Ändra till en nolla (0) istället ”byte debug = 0;” och spara programmet. Ladda upp programvaran i kretskortsdatorn igen och därefter ska även funktioner kopplade till kretskortsdatorns Tx-utgång fungera med MMRC.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/modelrailcontrol/MRC-documentation/tree/master/docs/clients/intro-02-arduino.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/clients/intro-01-overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Översikt</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/clients/intro-03-wifi"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Enheters grundinställning »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#arduino-ide" class="table-of-contents__link">Arduino IDE</a></li><li><a href="#drivrutin-för-usb-krets-ch340" class="table-of-contents__link">Drivrutin för USB-krets CH340</a></li><li><a href="#kretskortsdatorn" class="table-of-contents__link">Kretskortsdatorn</a><ul><li><a href="#steg-1---lägg-till-kort" class="table-of-contents__link">Steg 1 - Lägg till kort</a></li><li><a href="#steg-2---installera-kort" class="table-of-contents__link">Steg 2 - Installera kort</a></li><li><a href="#steg-3---välj-kretskortsdator" class="table-of-contents__link">Steg 3 - Välj kretskortsdator</a></li><li><a href="#steg-4---starta-om" class="table-of-contents__link">Steg 4 - Starta om</a></li></ul></li><li><a href="#bibliotek" class="table-of-contents__link">Bibliotek</a><ul><li><a href="#steg-1---hantera-bibliotek" class="table-of-contents__link">Steg 1 - Hantera bibliotek</a></li><li><a href="#steg-2---installera-bibliotek" class="table-of-contents__link">Steg 2 - Installera bibliotek</a></li></ul></li><li><a href="#mmrc-programvara" class="table-of-contents__link">MMRC programvara</a></li><li><a href="#anslut-kretskortsdatorn" class="table-of-contents__link">Anslut kretskortsdatorn</a></li><li><a href="#testa" class="table-of-contents__link">Testa!</a></li><li><a href="#stänga-av-meddelanden" class="table-of-contents__link">Stänga av meddelanden</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Dokumentation</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Översikt</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/struct-intro/">Struktur</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Gemenskap</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.svensktmjforum.se/forum/index.php?topic=21831.0" target="_blank" rel="noopener noreferrer" class="footer__link-item">Svenskt MJ-forum</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Övrigt</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/modelrailcontrol" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://v2.docusaurus.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus</a></li></ul></div></div><div class="text--center"><div>CC-BY-SA © 2020 Model Rail Control</div></div></div></footer></div>
<script src="/styles.e026daba.js"></script>
<script src="/runtime~main.af84c8f0.js"></script>
<script src="/main.7ed5da19.js"></script>
<script src="/1.961b250e.js"></script>
<script src="/2.6a4be48e.js"></script>
<script src="/57.b0a0774d.js"></script>
<script src="/58.2bbf2acb.js"></script>
<script src="/20ac7829.7a8a2a07.js"></script>
<script src="/17896441.3187e0e5.js"></script>
<script src="/41aecccd.871f343b.js"></script>
</body>
</html>