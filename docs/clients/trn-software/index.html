<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.68">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="MRC Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="MRC Blog Atom Feed"><title data-react-helmet="true">Programvaran | MRC</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Programvaran | MRC"><meta data-react-helmet="true" name="description" content="En förutsättning för att kunna  ladda programvaran till enheten är att du har installerat Arduinos utvecklingsmiljö (IDE) på din dator. Hur du gör dessa förberedelser beskrivs mer på sidan Börja programmera."><meta data-react-helmet="true" property="og:description" content="En förutsättning för att kunna  ladda programvaran till enheten är att du har installerat Arduinos utvecklingsmiljö (IDE) på din dator. Hur du gör dessa förberedelser beskrivs mer på sidan Börja programmera."><meta data-react-helmet="true" property="og:url" content="https://modelrailcontrol.org/docs/clients/trn-software"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://modelrailcontrol.org/docs/clients/trn-software"><link rel="stylesheet" href="/styles.75f223d2.css">
<link rel="preload" href="/styles.b694f8ce.js" as="script">
<link rel="preload" href="/runtime~main.a23074d7.js" as="script">
<link rel="preload" href="/main.10b3639f.js" as="script">
<link rel="preload" href="/1.799276e2.js" as="script">
<link rel="preload" href="/65.140df189.js" as="script">
<link rel="preload" href="/66.b1df8166.js" as="script">
<link rel="preload" href="/935f2afb.52c21283.js" as="script">
<link rel="preload" href="/64.5b764e11.js" as="script">
<link rel="preload" href="/1d440d92.fb74390a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2AhQ">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/mrc-logo.svg" alt="MRC-logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img alt="MRC-logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Dokumentation</a><a class="navbar__item navbar__link" href="/docs/clients/intro-overview">Enheter</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/modelrailcontrol" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/mrc-logo.svg" alt="MRC-logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img alt="MRC-logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Dokumentation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/clients/intro-overview">Enheter</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/modelrailcontrol" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive thin-scrollbar menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Allmänt</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/clients/intro-overview">Översikt</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/clients/intro-arduino">Börja programmera</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/clients/intro-settings">Enheters grundinställning</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Meddelandeserver</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/clients/cmc-01-install">Installera</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/clients/cmc-02-config">Konfigurera</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/clients/cmc-03-start">Starta &amp; felsök</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/clients/cmc-04-mqtt">MQTT</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Växelstyrning</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/clients/trn-intro">Introduktion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/clients/trn-pcb">Mönsterkort</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/clients/trn-controlpanel">Styrpanel</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/clients/trn-ctrlpanelbox">Styrpanel-hållare</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/clients/trn-electronics">Elektroniken</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/clients/trn-assemble">Montering</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/clients/trn-software">Programvaran</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/clients/trn-settings">Inställningar</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_39qw"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Programvaran</h1></header><div class="markdown"><p>En förutsättning för att kunna  ladda programvaran till enheten är att du har installerat Arduinos utvecklingsmiljö (IDE) på din dator. Hur du gör dessa förberedelser beskrivs mer på sidan <a href="/docs/clients/intro-arduino">Börja programmera</a>. </p><p>Det är en engångsuppgift, så har du en gång gjort iordning en MRC-enhet ska du inte behöva göra om förberedelserna igen.</p><p>Programvaran är uppdelad i flera olika filer, för att ge bättre överblick. Följande delar finns:</p><ul><li>mrc-2turnout - <em>Själva huvudprogrammet</em></li><li>mrcMqtt - <em>Hantering &amp; inställningar av MQTT-kommunikationen</em></li><li>mrcServo - Hantering &amp; inställningar av servon**</li><li>mrcSettings - <em>Generella inställningar</em></li><li>mrcStatus - <em>Hantering &amp; inställningar av status-lysdioder</em></li><li>mrcWifi - <em>Hantering &amp; inställningar av nätverket</em></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="grundinställningar"></a>Grundinställningar<a aria-hidden="true" class="hash-link" href="#grundinställningar" title="Direct link to heading">#</a></h2><p>Några generella inställningar och några som kan vara specifika för varje användning av programmet, har samlats i en separat fil som heter <em>mrcSettings.h</em>. Denna fil inkluderas i huvudprogrammet vid kompilering.</p><p>Du ändra dessa inställningar enkelt i en texteditor eller i Arduion IDE och sparar dem lokalt.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="in--och-utgångar"></a>In- och utgångar<a aria-hidden="true" class="hash-link" href="#in--och-utgångar" title="Direct link to heading">#</a></h3><p>Här kan man exempelvis vilja ändra vilka in-/utgångar som används av enheten:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Pin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int pinVx1Led1 = D4;    // Which pin the first status led is attached to</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int pinVx1Led2 = D3;    // Which pin the second status led is attached to</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int pinVx1Button = D2;  // Which pin the first button is attached to</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int pinVx1Servo = D1;   // Which pin the first servo is attached to</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int pinVx2Servo = RX;   // Which pin the second servo is attached to</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Följande in-/utgångar används som standard på en Wemos kretskortsdator:</p><table><thead><tr><th>Användning</th><th align="center">Vx1 pin</th><th align="center">Vx2 pin</th><th align="center">Kretkort</th></tr></thead><tbody><tr><td>Lysdiod 1</td><td align="center">D4</td><td align="center">D0</td><td align="center">L1</td></tr><tr><td>Lysdiod 2</td><td align="center">D3</td><td align="center">D5</td><td align="center">L2</td></tr><tr><td>Knapp</td><td align="center">D2</td><td align="center">D6</td><td align="center">Btn</td></tr><tr><td>Servo 1</td><td align="center">D1</td><td align="center">D7</td><td align="center">S1</td></tr><tr><td>Servo 2</td><td align="center">Rx</td><td align="center">Tx</td><td align="center">S2</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="namn-och-lösenord"></a>Namn och lösenord<a aria-hidden="true" class="hash-link" href="#namn-och-lösenord" title="Direct link to heading">#</a></h3><p>Om man vill ha ett annat startlösenord och -namn för hur man kommåt åt enhetens inställningar, får man ändra det på följande två rader. Kan rekommenderas om man är noga med säkerheten.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Access point configuration</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const char thingName[] = &quot;MRC-client&quot;;                 // Initial AP name, used as SSID of the own Access Point</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const char wifiInitialApPassword[] = &quot;mrc4president&quot;;  // Initial password, used when it creates an own Access Point</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="felsökning"></a>Felsökning<a aria-hidden="true" class="hash-link" href="#felsökning" title="Direct link to heading">#</a></h3><p>Man kan även vilja ändra inställningarna för vilken felsöknings-information som visas på seriella monitorn.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Debug</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">byte debug = 1;     // Set to &quot;1&quot; for debug messages in Serial monitor (9600 baud)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="huvudprogrammet"></a>Huvudprogrammet<a aria-hidden="true" class="hash-link" href="#huvudprogrammet" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="program-initiering"></a>Program-initiering<a aria-hidden="true" class="hash-link" href="#program-initiering" title="Direct link to heading">#</a></h3><p>Här görs alla olika initieringar och inställningar som behövs för att programmet ska ha rätt förusättningar. En del av inställningarna sker även genom att anropa andra funktioner.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">void setup() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Application setup</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="huvudprogrammet-1"></a>Huvudprogrammet<a aria-hidden="true" class="hash-link" href="#huvudprogrammet-1" title="Direct link to heading">#</a></h3><p>I programmets huvuddel hanteras alla återkommande &quot;arbeten&quot;, så som att hålla status-lysdioder blinkande, servon rörliga och anslutningen till MQTT-servern igång.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">void loop() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Main loop</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Här finns även en kontroll av om programmet startat för första gången, för då ska nämligen lysdioderna visa det genom att blinka på ett annorlunda sätt.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="knapp-hantering"></a>Knapp-hantering<a aria-hidden="true" class="hash-link" href="#knapp-hantering" title="Direct link to heading">#</a></h3><p>Knapparna hanteras av ett bibliotek som heter <em>EasyButton</em> och underhålls av <em>Evert Arias</em>. Mer information om dess hantering hittas på <a href="https://github.com/evert-arias/EasyButton" target="_blank" rel="noopener noreferrer">bibliotekets Github-sidor</a>.</p><p>Det finns även egna funktioner som hanterar knapptryckningarna. Där avgörs vilket läge knappen satts i och utifrån det avgörs hur servo och lysdioder ska reagera.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">void btn1Pressed () {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Function that gets called when a button is pressed</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="servohantering"></a>Servohantering<a aria-hidden="true" class="hash-link" href="#servohantering" title="Direct link to heading">#</a></h3><p>Några av funktionerna hanterar vad som ska hända när ett servo nått sitt ändläge. Där kontrolleras om ett eventuellt &quot;parservo&quot; också rört sig klart och visar sen med lysdioderna hur växeln blivit lagd.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">void servo1aFinished () {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Function that gets called when a servo finished moving</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="servo-funktioner"></a>Servo-funktioner<a aria-hidden="true" class="hash-link" href="#servo-funktioner" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="skapa-ett-servo-objekt"></a>Skapa ett servo-objekt<a aria-hidden="true" class="hash-link" href="#skapa-ett-servo-objekt" title="Direct link to heading">#</a></h3><p>Skapar ett nytt objekt &#x27;MyServo&#x27; för att kunna styra ett servo på vald utgång, i detta fall pin D1.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mrcServo MyServo(D1);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ställ-in-servots-egenskaper"></a>Ställ in servots egenskaper<a aria-hidden="true" class="hash-link" href="#ställ-in-servots-egenskaper" title="Direct link to heading">#</a></h3><p>Ställer in ändlägen och hastighet på servo samt ger möjlighet att &quot;lossa&quot; servot från ett spänt läge.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">void setup() { </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    MyServo.limits(min, max, hastighet, justering);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><ul><li><strong>min</strong> är en siffra mellan 0 och 180 som ställer in servots ena ändläge</li><li><strong>max</strong> är en siffra mellan 0 och 180 som ställer in servots andra ändläge</li><li><strong>hastighet</strong> är antalet millisekunder som servot väntar mellan varje steg det stegar fram</li><li><strong>justering</strong> är antalet extra steg servot tar utanför ändläget, för att sen stega tillbaka lika många steg igen. Se illustration nedan:</li></ul><p><img alt="Hur &amp;#39;justering&amp;#39; fungerar" src="/assets/images/software-servo-back-38f68bed48ac1e3f50964d9dc1678a57.svg"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="servo-hantering"></a>Servo-hantering<a aria-hidden="true" class="hash-link" href="#servo-hantering" title="Direct link to heading">#</a></h3><p>För att servofunktionerna ska fungera behöver det &quot;ständigt&quot; kontrolleras om det finns någon servo-aktivitet på gång, att starta eller att avsluta.
Detta gör du genom att i programmets huvuddel anropa funktionen <code>loop()</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">void loop() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    MyServo.loop();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="flytta-servot"></a>Flytta servot<a aria-hidden="true" class="hash-link" href="#flytta-servot" title="Direct link to heading">#</a></h3><p>Det finns tre olika kommandon för att ändra servots läge:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    MyServo.closed();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    MyServo.thrown();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    MyServo.moveTo (180);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Du använder dem på följande sätt:</p><ul><li><strong>closed()</strong> gör att servot stegar till MAX ändpunkt</li><li><strong>thrown()</strong> gör att servot stegar till MIN ändpunkt</li><li><strong>moveTo()</strong> flyttar servot till en angiven punkt/vinkel, mellan 0 och 180</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="detektera-servots-ändpunkter"></a>Detektera servots ändpunkter<a aria-hidden="true" class="hash-link" href="#detektera-servots-ändpunkter" title="Direct link to heading">#</a></h3><p>Anger en funktion som ska anropas när servot har rört sig klart, d.v.s nått det ändläge som senaste kommandot angett. </p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">void setup() { </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    MyServo.onFinished(myServoCallback);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Du kan sen skapa en funtion som heter <code>MyServoCallback</code>och där utföra valfria åtgärder när servot nått ändpunkten</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">void myServoCallback () {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Serial.println(&quot;Servo har nått ändläget&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="hämta-servostatus"></a>Hämta servostatus<a aria-hidden="true" class="hash-link" href="#hämta-servostatus" title="Direct link to heading">#</a></h3><p>Denna funktion kan du anropa för att kontrollera vilken aktivitet servot har på gång.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    status = MyServo.status();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Du kan få tre olika svar:</p><ul><li><strong>NON = 0,</strong> betyder att servot inte gör något</li><li><strong>MIN = 1,</strong> servot är på väg till MIN-läget</li><li><strong>MAX = 2</strong> servot är på väg till MAX-läget</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Observera</h5></div><div class="admonition-content"><p>Denna funktion fungerar inte korrekt i dagsläget (2020-12-21), utan ger enbart <code>false</code> för NON eller <code>true</code> för MIN <em>och</em> MAX.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="hämta-servoposition"></a>Hämta servoposition<a aria-hidden="true" class="hash-link" href="#hämta-servoposition" title="Direct link to heading">#</a></h3><p>Med denna funktion kan du ta reda på i vilket ändläge servot befinner sig i.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    boolean position = MyServo.position();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><ul><li><strong>0</strong> eller <strong>false</strong> betyder att servot är i MIN-position</li><li><strong>1</strong> eller <strong>true</strong> betyder att servot är i MAX-position</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="status-funktioner"></a>Status-funktioner<a aria-hidden="true" class="hash-link" href="#status-funktioner" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="skapa-ett-status-objekt"></a>Skapa ett status-objekt<a aria-hidden="true" class="hash-link" href="#skapa-ett-status-objekt" title="Direct link to heading">#</a></h3><p>Skapar ett nytt objekt &#x27;MyStatus&#x27; för att styra en lysdiod på vald utgång, i detta fall pin D4.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mrcStatus MyStatus(D4);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="status-hantering"></a>Status-hantering<a aria-hidden="true" class="hash-link" href="#status-hantering" title="Direct link to heading">#</a></h3><p>För att statusfunktionerna ska fungera behöver det &quot;ständigt&quot; kontrolleras om det finns någon servo-aktivitet på gång, att starta eller att avsluta.
Detta gör du genom att i programmets huvuddel anropa funktionen <code>loop()</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    MyStatus.loop();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="statushantering"></a>Statushantering<a aria-hidden="true" class="hash-link" href="#statushantering" title="Direct link to heading">#</a></h3><p>Du kan hantera lysdioden på tre olika sätt, med följande kommandon:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    MyStatus.on();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    MyStatus.off();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    MyStatus.blink(500);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><ul><li><strong>on()</strong> tänder lysdioden</li><li><strong>off()</strong> släcker lysdioden</li><li><strong>blink(500)</strong> gör att lysdioden blinkar med 500 millisekunders intervall</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="hämta-status"></a>Hämta status<a aria-hidden="true" class="hash-link" href="#hämta-status" title="Direct link to heading">#</a></h3><p>Du anropas denna funktion för att få reda på i vilket läge lysdioden befinner sig i.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    boolean MyStatus.status();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Du kan få tre olika svar:</p><ul><li><strong>OFF = 0,</strong> betyder att lysdioden är släckt</li><li><strong>ON = 1,</strong> lysdioden är tänd</li><li><strong>BLINK = 2</strong> lysdioden blinkar</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Observera</h5></div><div class="admonition-content"><p>Denna funktion fungerar inte korrekt i dagsläget (2020-12-21), utan ger enbart <code>false</code> för OFF eller <code>true</code> för ON <em>och</em> BLINK.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mqtt-funktioner"></a>MQTT-funktioner<a aria-hidden="true" class="hash-link" href="#mqtt-funktioner" title="Direct link to heading">#</a></h2><p>Hanteringen av MQTT är uppdelad i två olika delar. En del där ett separat biblioteks funktioner används och en del där programmets har egna MQTT-funktioner.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pubsubclient"></a>PubSubClient<a aria-hidden="true" class="hash-link" href="#pubsubclient" title="Direct link to heading">#</a></h3><p>För hantering av MQTT-meddelanden används ett separat bibliotek (library) som heter <em>PubSubClient</em> och underhålls av <em>Nick O&#x27;Leary</em>. Hur detta biblioteks funktioner kan användas framgår av <a href="https://pubsubclient.knolleary.net/" target="_blank" rel="noopener noreferrer">PubSubClients webbplats</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="inställningar-för-mqtt"></a>Inställningar för MQTT<a aria-hidden="true" class="hash-link" href="#inställningar-för-mqtt" title="Direct link to heading">#</a></h3><p>Alla inställningar som behövs för MQTT har samlats i denna funktion.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">void setup() { </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // Initial mqtt setup</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  mqttSetup();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Här finns främst alla de ämnen som programmet behöver hantera samt en del förutbestämnda meddelanden.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="anslut-till-mqtt-server"></a>Anslut till MQTT-server<a aria-hidden="true" class="hash-link" href="#anslut-till-mqtt-server" title="Direct link to heading">#</a></h3><p>Funktionen för att ansluta sig till MQTT-servern innehåller förutom själva anslutningsrutinerna, även rutiner för att publicera till och prenumerera på olika ämnen.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mqttConnect();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="publicera-meddelande"></a>Publicera meddelande<a aria-hidden="true" class="hash-link" href="#publicera-meddelande" title="Direct link to heading">#</a></h3><p>När man i programmet vill publicera ett meddelande till ett ämne, använder man funktionen mqttPublish.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mqttPublish(&quot;mrc/enhet01/turnout/set&quot;, &quot;closed&quot;, 1);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>De tre olika parametrarna används så här:</p><ul><li><strong>mrc/enhet01/turnout/set</strong> är ämnet man vill publicera till</li><li><strong>closed</strong>, är meddelandet som ska publiceras</li><li><strong>1</strong> anger att meddelandet ska ligga kvar även efter publiceringen. Med en nolla (0) här, kommer meddelandet att försvinna så fort de som prenumererae på ämnet har fått meddelandet</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="prenumerera-på-meddelanden"></a>Prenumerera på meddelanden<a aria-hidden="true" class="hash-link" href="#prenumerera-på-meddelanden" title="Direct link to heading">#</a></h3><p>För att kunna ta emot meddelanden från MQTT-servern, finns en funktion som hanterar detta. I denna funktion tas meddelandet emot hanteras beroende på innehåll.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">void mqttCallback(char* topic, byte* payload, unsigned int length) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Function to handle MQTT messages sent to this device</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="wifi-funktioner"></a>Wifi-funktioner<a aria-hidden="true" class="hash-link" href="#wifi-funktioner" title="Direct link to heading">#</a></h2><p>Även hanteringen av wifi/trådlöst nätverk är uppdelad i två olika delar. Det mesta hanteras av ett separat biblioteks funktioner och själva programmet har endast en egen wifi-funktion.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="iotwebconf"></a>IotWebConf<a aria-hidden="true" class="hash-link" href="#iotwebconf" title="Direct link to heading">#</a></h3><p>Det mesta av hanteringen kring tråslösa nätverket <em>och</em> programmets möjligheter till användar-inställningar hanteras av ett bibliotek som heter <em>IotWebConf</em> och underhålls av <em>Balazs Kelemen</em>. Mer information om dess hantering hittas på <a href="https://github.com/prampec/IotWebConf" target="_blank" rel="noopener noreferrer">bibliotekets Github-sidor</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="spara-inställningar"></a>Spara inställningar<a aria-hidden="true" class="hash-link" href="#spara-inställningar" title="Direct link to heading">#</a></h3><p>En funktion som hanterar sparandet av inställningar ligger i programmets huvuddel:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">void configSaved() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Function that gets called when IotWebConf web page config has been saved</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="inställningar-för-wifi"></a>Inställningar för wifi<a aria-hidden="true" class="hash-link" href="#inställningar-för-wifi" title="Direct link to heading">#</a></h3><p>Injställningarna för wifi är ganska omfattande och innehåller en hel del kod som behövs för att kunna hantera användar-inställningar via en inbyggd webbsida. Dessa inställningar är samlade i en egen funktion.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">void setup() { </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // Initial wifi setup</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  wifiSetup();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/modelrailcontrol/MRC-documentation/blob/master/docs/clients/trn-software.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/clients/trn-assemble"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Montering</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/clients/trn-settings"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Inställningar »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_ thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#grundinställningar" class="table-of-contents__link">Grundinställningar</a><ul><li><a href="#in--och-utgångar" class="table-of-contents__link">In- och utgångar</a></li><li><a href="#namn-och-lösenord" class="table-of-contents__link">Namn och lösenord</a></li><li><a href="#felsökning" class="table-of-contents__link">Felsökning</a></li></ul></li><li><a href="#huvudprogrammet" class="table-of-contents__link">Huvudprogrammet</a><ul><li><a href="#program-initiering" class="table-of-contents__link">Program-initiering</a></li><li><a href="#huvudprogrammet-1" class="table-of-contents__link">Huvudprogrammet</a></li><li><a href="#knapp-hantering" class="table-of-contents__link">Knapp-hantering</a></li><li><a href="#servohantering" class="table-of-contents__link">Servohantering</a></li></ul></li><li><a href="#servo-funktioner" class="table-of-contents__link">Servo-funktioner</a><ul><li><a href="#skapa-ett-servo-objekt" class="table-of-contents__link">Skapa ett servo-objekt</a></li><li><a href="#ställ-in-servots-egenskaper" class="table-of-contents__link">Ställ in servots egenskaper</a></li><li><a href="#servo-hantering" class="table-of-contents__link">Servo-hantering</a></li><li><a href="#flytta-servot" class="table-of-contents__link">Flytta servot</a></li><li><a href="#detektera-servots-ändpunkter" class="table-of-contents__link">Detektera servots ändpunkter</a></li><li><a href="#hämta-servostatus" class="table-of-contents__link">Hämta servostatus</a></li><li><a href="#hämta-servoposition" class="table-of-contents__link">Hämta servoposition</a></li></ul></li><li><a href="#status-funktioner" class="table-of-contents__link">Status-funktioner</a><ul><li><a href="#skapa-ett-status-objekt" class="table-of-contents__link">Skapa ett status-objekt</a></li><li><a href="#status-hantering" class="table-of-contents__link">Status-hantering</a></li><li><a href="#statushantering" class="table-of-contents__link">Statushantering</a></li><li><a href="#hämta-status" class="table-of-contents__link">Hämta status</a></li></ul></li><li><a href="#mqtt-funktioner" class="table-of-contents__link">MQTT-funktioner</a><ul><li><a href="#pubsubclient" class="table-of-contents__link">PubSubClient</a></li><li><a href="#inställningar-för-mqtt" class="table-of-contents__link">Inställningar för MQTT</a></li><li><a href="#anslut-till-mqtt-server" class="table-of-contents__link">Anslut till MQTT-server</a></li><li><a href="#publicera-meddelande" class="table-of-contents__link">Publicera meddelande</a></li><li><a href="#prenumerera-på-meddelanden" class="table-of-contents__link">Prenumerera på meddelanden</a></li></ul></li><li><a href="#wifi-funktioner" class="table-of-contents__link">Wifi-funktioner</a><ul><li><a href="#iotwebconf" class="table-of-contents__link">IotWebConf</a></li><li><a href="#spara-inställningar" class="table-of-contents__link">Spara inställningar</a></li><li><a href="#inställningar-för-wifi" class="table-of-contents__link">Inställningar för wifi</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Information</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Dokumentation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/clients/intro-overview/">Enheter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Gemenskap</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.svensktmjforum.se/forum/index.php?topic=21831.0" target="_blank" rel="noopener noreferrer" class="footer__link-item">Svenskt MJ-forum</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Övrigt</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/modelrailcontrol" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://v2.docusaurus.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus</a></li></ul></div></div><div class="text--center"><div>CC-BY-SA © 2020 Model Rail Control</div></div></div></footer></div>
<script src="/styles.b694f8ce.js"></script>
<script src="/runtime~main.a23074d7.js"></script>
<script src="/main.10b3639f.js"></script>
<script src="/1.799276e2.js"></script>
<script src="/65.140df189.js"></script>
<script src="/66.b1df8166.js"></script>
<script src="/935f2afb.52c21283.js"></script>
<script src="/64.5b764e11.js"></script>
<script src="/1d440d92.fb74390a.js"></script>
</body>
</html>